<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--360浏览器优先以webkit内核解析-->


    <title>新建用户</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/font-awesome.min93e3.css?v=4.4.0" rel="stylesheet">
    <link rel="stylesheet" href="js/plugins/layer/skin/layer.css">
    <link href="css/style.min.css" rel="stylesheet">
</head>
<body class="gray-bg">
<div class="white-bg createContact">
    <header class="cusTit">
        <div class="circleB"></div>
        <p>新建用户</p>
    </header>

    <div class="form-inline">
        <div class="form-group">
            <label>用户姓名：</label>
            <input type="text" id="userName">
        </div>
        <div class="form-group">
            <label>身份证号：</label>
            <input type="text" id="userIdentify" name="userIdentify"/>
        </div>

    </div>
    <div class="form-inline">
        <div class="form-group">
            <label>手机号：</label>
            <input type="text" id="userTel">
        </div>
        <div class="form-group">
            <label>用户邮箱：</label>
            <input type="text" id="userEmail">
        </div>
    </div>
    <div class="form-inline">
        <div class="form-group">
            <label>所在部门：</label>
            <input type="text" id="userDepart" name="cusName"/>
        </div>
        <div class="form-group">
            <label>用户职称：</label>
            <input type="text" id="userTitle" name="cusName"/>
        </div>
    </div>
    <div class="form-inline">
        <div class="form-group">
            <label>用户住址：</label>
            <input type="text" id="userAddr" name="cusName"/>
        </div>
    </div>

    <button class="save saveCus" id="saveCont">保存</button>
</div>
<script src="js/jquery.min.js?v=2.1.4"></script>
<script src="js/bootstrap.min.js?v=3.3.6"></script>
<script src="js/plugins/layer/layer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>
<script src="js/main.js"></script>
<script>
    $(function () {

    })




    $("#saveCont").click(function () {
        var url = 'crm/70010/100';
        var regTel = /^1[3|4|5|7|8][0-9]{9}$/;
        var regEmail = /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/
        var username = $('#userName').val().trim();
        var userTel = $('#userTel').val().trim();
        var userEmail = $('#userEmail').val().trim()
        var usercertNo=$.trim($("#userIdentify").val())
        var userDepart=$.trim($("#userDepart").val())
        var userTitle=$.trim($("#userTitle").val())
        var userAddr=$.trim($("#userAddr").val())
        var data = {
            userName:username,
            userCertNo:usercertNo,
            userTelephone:userTel,
            userEmail:userEmail,
            userDepartment:userDepart,
            userTitle:userTitle,
            userAddress:userAddr
        };
        var dosucess = function (res) {
            $('#userName').val('')
            $('#userTel').val('')
            $('#userEmail').val('')
            $("#userIdentify").val('')
            $("#userDepart").val('')
            $("#userTitle").val('')
            $("#userAddr").val('')
            layer.msg('添加成功', {icon: 1})
        }
        if ( !username||!usercertNo||!userDepart||!userTitle||!userAddr ) {
            layer.msg('请将信息填写完整！', {icon: 2})
            return
        }

        if (!regTel.test(userTel)) {
            layer.msg('手机号格式不正确', {icon: 2})
            return;
        }
        if (!regEmail.test(userEmail)) {
            layer.msg('邮箱格式不正确', {icon: 2})
            return;
        }
        ajaxRequest(url, data, dosucess)
    })





</script>
</body>
</html>